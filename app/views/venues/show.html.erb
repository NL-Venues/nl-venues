<% content_for :page_title, @venue %>

<div class="container mt-4">
  <header class="mb-4 text-center">
    <h2 class="fw-bold"><%= @venue.name %></h2>
    <% if policy(@venue).edit? || policy(@venue).destroy? %>
      <div class="btn-toolbar justify-content-center mb-3" role="toolbar">
      <% if policy(@venue).edit? %>
        <div class="btn-group me-2" role="group">
        <%= link_to 'Edit', edit_venue_path(@venue), class: 'btn btn-warning btn-sm' %>
        </div>
      <% end %>
      <% if policy(@venue).destroy? %>
        <div class="btn-group" role="group">
        <%= link_to 'Delete', @venue, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
        </div>
      <% end %>
      </div>
    <% end %>
    <p class="">
      <%= @venue.primary_address&.to_formatted_s(excluded: %i[postal_code country_name]) %> | <a href="#map" class="text-decoration-none">View on Map</a>
    </p>
  </header>

  <%= render_image_gallery(@venue.images, @venue.name) if @venue.venue_images.any? %>

  <section class="description mb-4">
    <div class="row">
      <div class="col-md-8">
        <h3 class="mb-3"><i class="fas fa-info-circle text-warning"></i> Venue Description</h3>
        <%= @venue.description.presence || 'Nothing yet' %>

        <h3 class="mt-4 mb-3"><i class="fas fa-address-book text-warning"></i> Contacts</h3>
        <%= render partial: 'better_together/contact_details/about_section', locals: { contactable: @venue, include_heading: false } %>
      </div>
      <div class="col-md-4">
        <div class="card shadow-sm">
          <div class="card-body">
            <h3 class="card-title"><i class="fas fa-list text-warning"></i> Quick Facts</h3>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><strong>Capacity:</strong> 52</li>
              <li class="list-group-item"><strong>Sound Tech:</strong> No</li>
              <li class="list-group-item"><strong>Lighting Tech:</strong> No</li>
              <li class="list-group-item"><strong>Accessible:</strong> Yes</li>
              <li class="list-group-item"><strong>Box Office:</strong> No</li>
              <li class="list-group-item"><strong>Ticket Sales:</strong> Advance</li>
            </ul>
            <div class="mt-3">
              <h3 class="mb-2"><i class="fas fa-globe text-warning"></i> Online</h3>
              <p><a href="http://www.cafe59.ca" target="_blank" class="btn btn-primary btn-sm">Venue Website</a></p>
              <div class="d-flex gap-2">
                <a href="https://www.facebook.com/cafe59pasadena" class="btn btn-outline-primary btn-sm"><i class="fab fa-facebook"></i></a>
                <a href="https://www.instagram.com/cafe59pasadena" class="btn btn-outline-danger btn-sm"><i class="fab fa-instagram"></i></a>
                <a href="#" class="btn btn-outline-info btn-sm"><i class="fab fa-twitter"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="financial">
    <h3>Financial</h3>
    <p><strong>Types of deals:</strong> Guarantee</p>
    <p><strong>Accommodations provided:</strong> No</p>
    <p><strong>Additional Information:</strong> $200 for solo artist; $300 for duo artist...</p>

    <h3>Marketing</h3>
    <p>Posters, social media posts, in house TV screens</p>

    <h3>Tech & Equipment</h3>
    <p>Soundboard, 4 Yamaha speakers, monitor, 2 mic stands, music stand</p>

    <h3>Resources & Downloads</h3>
    <a href="#"><i class="fas fa-arrow-alt-circle-down"></i> Tech Info</a><br>
    <a href="#"><i class="fas fa-arrow-alt-circle-down"></i> Stage Info</a><br>
    <a href="#"><i class="fas fa-arrow-alt-circle-down"></i> Seating Chart</a>
  </section>

  <section id="map">
    <h3>Location Map</h3>
    <% map = BetterTogether::Geography::Map.new %>
    <div class="map" id="<%= dom_id(@venue, :map) %>"
        data-controller="better_together--map"
        data-better_together--map-center-value="<%= map.center_for_leaflet %>"
        data-better_together--map-zoom-value="<%= map.zoom %>"
        data-better_together--map-extent-value="<%= map.viewport %>">
      <div class="map-controls">
        <button data-action="better_together--map#switchToOSM">OpenStreetMap</button>
        <button data-action="better_together--map#switchToSatellite">Satellite</button>
        <button data-action="better_together--map#enableGeolocation">Geolocate Me</button>
      </div>
    </div>
  </section>
</div>